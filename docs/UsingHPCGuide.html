<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Accessing the HPC</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>








<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Using HPC Guide</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="UsingHPCGuide.html">Accessing the HPC</a>
</li>
<li>
  <a href="UsingR.html">Using R on the HPC</a>
</li>
<li>
  <a href="parallelComputing.html">Parallel computing</a>
</li>
<li>
  <a href="fileTransfer.html">Transferring files</a>
</li>
<li>
  <a href="retrievingFiles.html">Retrieving deleted files</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Accessing the HPC</h1>

</div>


<p>This document explains how to use R on the University of Sheffield’s High Performance Computing clusters. R is only available on <del>Iceberg</del><sup>1</sup> and ShARC, which are clusters managed using Son of Grid Engine job scheduling software (which is a derivative of Sun Grid Engine, or SGE). If you’re googling how to submit jobs etc., make sure you’re looking at SGE commands (and not Slurm which is another scheduler that is used on the Bessemer cluster).</p>
<p>Sheffield Advanced Research Computer (ShARC) is apparently the “new High Performance Computing System and the successor to Iceberg” and has <a href="https://docs.hpc.shef.ac.uk/en/latest/sharc/cluster_specs.html#sharc-specs">these specifications</a>. It has a total of 121 worker nodes and 2024 cores (though some are exclusive to research groups that purchased them). There are also 4 nodes with 16 cores and total memory of 256GB each.</p>
<p><sup>1</sup> Iceberg will be decommissioned on 30 November 2020 &amp; will not be accessible after this date. Iceberg is slightly older (with older processers) and has <a href="https://docs.hpc.shef.ac.uk/en/latest/iceberg/cluster_specs.html">these specifications</a>. Of relevance, there are about 203 worker nodes and a total of 3440 cores, they’re built differently with varying numbers of cores and total memory. There are 4 nodes which have 16 cores and total memory of 256GB each. Iceberg does not require VPN connection to access, though I think during this work-from-home period, one does require the University of Sheffield’s Virtual Private Network (VPN) to access Iceberg remotely.</p>
<div id="using-command-line-tools" class="section level2">
<h2>Using command line tools</h2>
<p>On <strong>macOS</strong>, open a Terminal window (type ‘Terminal’ in Spotlight or search in Applications). I’m using macOS High Sierra 10.13.6.</p>
<p>You should see your name and home folder.</p>
<div class="figure">
<img src="Images/Terminal.png" alt="" />
<p class="caption"><em>Opening a terminal window</em></p>
</div>
<p>For <strong>Microsoft Windows</strong> users, open a PowerShell terminal or Command Prompt, though the Sheffield HPC guide recommends using the browser application (myAPPs portal) to access the HPC, following the <a href="https://www.sheffield.ac.uk/it-services/research/hpc/using/access/browser">instructions here</a>. Once you’ve downloaded the necessary client (Oracle Secure Global Desktop Client) and logged in, there’s the option to use an interactive job or a terminal.</p>
</div>
<div id="other-useful-command-line-prompts" class="section level2">
<h2>Other useful command line prompts</h2>
<ul>
<li><code>pwd</code> print current directory (or more commonly known as a folder)</li>
<li><code>cd another/directory</code> change directory</li>
<li><code>..</code> to go one level up</li>
<li><code>mkdir file/path/directoryName</code> create a directory</li>
<li><code>ls</code> to list all items in the current directory</li>
<li><code>mv old/file/path/fileName.ext new/file/path</code> to move a file to a different location. You can also use this to rename your files, like <code>mv oldFileName.ext newFileName.ext</code></li>
<li><code>rm</code> to delete a file (! warning! this is permanent and cannot be undone)†</li>
<li><code>rm file/path/*</code> to delete everything in a directory. To delete the directory itself, use <code>rm -r file/path</code></li>
<li><code>cat fileName.ext</code> to print/view the contents of the file (all of it!)</li>
<li><code>head fileName.ext</code> to print/view the first few lines of the file</li>
</ul>
<p>†There is <strong>is</strong> the possibility of retrieving an accidentally deleted file, <strong>if</strong> it’s within the time frame that snapshots are retained. See this section on <a href="https://jocelynesze.github.io/UsingRinHPC/retrievingFiles.html">retrieving accidentally deleted files</a>.</p>
<p>These commands are all relative to your current location. If you’re running something on command line and want to cancel it (for e.g., I often try and log in to the HPC without being connected to the VPN and the prompt to enter password never appears), use <code>Ctrl + c</code> to “kill” the command. A useful tip I picked up while reading the many webpages is using <code>Ctrl + a</code> to move the cursor to the start of the command line.</p>
<div class="figure">
<img src="Images/TerminalCommands.png" alt="" />
<p class="caption"><em>Basic command line commands</em></p>
</div>
</div>
<div id="logging-in-to-the-hpc" class="section level2">
<h2>Logging in to the HPC</h2>
<p>You need to be connected to the University of Sheffield Virtual Private Network first. Once connected, type the following on your terminal</p>
<pre class="bash"><code>ssh -X UserName@sharc.sheffield.ac.uk</code></pre>
<p>A prompt will appear for your password. On MacOS terminals, the password is not be printed as you type it, and if you make any mistakes or try to backspace, it’ll return <code>Permission denied, please try again.</code></p>
<p>The first time you log in from your computer, a prompt will appear asking if you do want to connect to the remote cluster. Type yes.</p>
<div class="figure">
<img src="Images/HPC_firstLogIn.png" alt="" />
<p class="caption"><em>First log in</em></p>
</div>
<p>In the above screenshot, I was logged in to ShARC, before logging out and logging in to Iceberg for the first time. <em>I’m not sure what the <code>-bash: warning: setLocale: LC_CTYPE: cannot change locale (UTF-8): No such file or directory</code> warning means, it shouldn’t appear but it also doesn’t seem to have affected my use.</em></p>
<div class="figure">
<img src="Images/HPC_LogIn.png" alt="" />
<p class="caption"><em>Logging in to the HPC</em></p>
</div>
<p>Once you’ve logged in, you’ll notice that instead of being in your computer <code>(base)</code>, you are now in a head node of the HPC <code>[UserName@sharc-loginX ~]</code>. At this point, you can access files but you can’t load applications (like R); for that you need to be assigned to a worker node.</p>
<p>You can log in to Iceberg instead of ShARC by replacing ‘sharc’ with ‘iceberg’, as in <a href="mailto:UserName@iceberg.sheffield.ac.uk" class="email">UserName@iceberg.sheffield.ac.uk</a>. Both these clusters have R available as an application, but the latest version of R on Iceberg is 3.3.1 compared to 3.6.3 (as of May 2020). Iceberg will also be decommissioned on 30 November 2020 and will not be accessible after.</p>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
